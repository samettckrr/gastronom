<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gastronom</title>
  <style>
    body{margin:0;font-family:system-ui,Arial;background:#0f172a;color:#e5e7eb;display:grid;place-items:center;height:100dvh}
    .card{padding:32px;border-radius:16px;background:rgba(255,255,255,.06);border:1px solid rgba(148,163,184,.2);text-align:center}
    h1{margin:0 0 8px;font-size:28px}
    p{margin:0 0 16px;opacity:.85}
    small{opacity:.6}
  </style>
</head>
<body>
  <div class="card">
    <h1>Gastronom</h1>
    <p>Masa â€¢ SipariÅŸ â€¢ Mutfak â€” <b>YakÄ±nda</b></p>
    <small>Â© 2025 Gastronom</small>
  </div>
  <script type="module">
  import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

  // ðŸ‘‡ BURAYA KENDÄ° DEÄžERLERÄ°NÄ° KOY
  const SUPABASE_URL  = "https://deiycvkmwiaqzgtyoxmm.supabase.co";
  const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlaXljdmttd2lhcXpndHlveG1tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcwMTg5MzUsImV4cCI6MjA3MjU5NDkzNX0.7Iic2nacxqj2Flusjd4t2HR-8fUHpkmUcLNJs-Nt37I";

  const sb = createClient(SUPABASE_URL, SUPABASE_ANON);

  // Durum gÃ¶stergesi
  const box = document.querySelector('.card');
  const s = document.createElement('div'); s.style.marginTop='12px'; box.appendChild(s);

  async function refresh() {
    const { data:{ session } } = await sb.auth.getSession();
    s.textContent = session ? `GiriÅŸli: ${session.user.email}` : "GiriÅŸ yapÄ±lmamÄ±ÅŸ.";
  }

  // Mini login formu
  const form = document.createElement('form');
  form.innerHTML = `
    <div style="margin:10px 0"><input id="em" type="email" placeholder="E-posta" required style="padding:10px;border-radius:10px"></div>
    <div style="margin:10px 0"><input id="pw" type="password" placeholder="Åžifre" required style="padding:10px;border-radius:10px"></div>
    <button>GiriÅŸ yap</button>
    <button type="button" id="logout" style="margin-left:8px">Ã‡Ä±kÄ±ÅŸ</button>`;
  box.appendChild(form);

  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    const email = document.getElementById('em').value.trim();
    const password = document.getElementById('pw').value;
    const { error } = await sb.auth.signInWithPassword({ email, password });
    s.textContent = error ? `Hata: ${error.message}` : "GiriÅŸ baÅŸarÄ±lÄ±.";
    refresh();
  });

  document.getElementById('logout').addEventListener('click', async ()=>{
    await sb.auth.signOut(); s.textContent = "Ã‡Ä±kÄ±ÅŸ yapÄ±ldÄ±."; refresh();
  });

  refresh();
</script>
</body>
</html>
